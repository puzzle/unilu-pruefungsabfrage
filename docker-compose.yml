services:
  spring:
    container_name: spring
    tty: true
    image: maven:3.9.9-amazoncorretto-21
    command: mvn spring-boot:run
    working_dir: /app-root/
    ports:
      - "8080:8080"
      - "5005:5005"
    environment:
      RESOURCE_DIR: ./static
      SPRING_THYMELEAF_PREFIX: file:src/main/resources/templates/
      SPRING_THYMELEAF_CACHE: false
      SPRING_WEB_RESOURCES_STATIC_LOCATIONS: file:src/main/resources/static/
      SPRING_WEB_RESOURCES_CACHE_PERIOD: 0

    volumes:
      - ./:/app-root/
      - ~/.m2/repository:/root/.m2/repository

  maven:
    container_name: maven
    image: maven:3.9.9-amazoncorretto-21
    command: mvn fizzed-watcher:run
    working_dir: /app-root/
    volumes:
      - ./:/app-root/
      - ~/.m2/repository:/root/.m2/repository
